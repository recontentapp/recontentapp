# Contributing to Recontent.app

## Requirements

- Git
- Docker & Docker compose
- Node.js & Yarn
- AWS CLI
- Localstack

## Get started

```sh
git clone git@github.com:recontentapp/recontentapp.git

cd recontentapp

# Start db & maildev containers
docker-compose -f docker/docker-compose.dev.yml up -d

# Apply db migrations
yarn workspace db deploy

# Install dependencies
yarn

# Autogenerated files from OpenAPI schemas
yarn openapi:generate

# Start API server
yarn start:api

# Start Vite dev server
yarn start:app
```

## Tech stack

Recontent.app is developed using Javascript on both the frontend & backend.

The codebase is organized as a Yarn workspace with several packages:

- `api`: Backend source code
- `app`: Frontend source code
- `cli`: CLI source code
- `db`: DB schema & migrations
- `email-templates`: MJML templates

Nest.js is used on the backend with an express.js adapter.

React.js is used on the frontend with Vite as bundler/dev server. Packages like `react-router`, `react-hook-form`, `zod` & `stitches` are used for various concerns like routing, forms, schema validation & CSS-in-js.

OpenAPI is used to define data structure (objects, enums) used in request payloads & response bodies. These definitions allow to generate Typescript interfaces to ensure end-to-end static typing. [`openapi-kit`](https://github.com/greeeg/openapi-kit) is used for this.

[Prisma](https://prisma.io/) is used as a database ORM & migrations tool.

[MJML](https://mjml.io/) is used to generate email templates.

## AWS services locally with LocalStack

Some Recontent.app features are based on AWS services like S3. In order to make them work locally without actually using AWS during development, [`localstack`](https://localstack.cloud) is used.

In order to set up `localstack` resources using the AWS CLI, you can define an AWS profile with the following values.

```sh
# ~/.aws/config
[profile recontent]
region=us-east-1
output=json
endpoint_url = http://localhost:4566
```

```sh
# ~/.aws/credentials
[recontent]
aws_access_key_id=test
aws_secret_access_key=test
```

Each AWS CLI command can then be ran while specifying this profile & a custom endpoint URL:

```sh
aws --profile recontent --endpoint-url=http://localhost:4566 s3api ls
```
